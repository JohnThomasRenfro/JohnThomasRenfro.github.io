<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korean to English Translator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .output {
            margin-top: 20px;
        }
        .word {
            margin: 5px 0;
        }
        .hangul-text {
            font-family: 'Nanum Gothic', sans-serif;
            font-size: 16px;
            font-weight: normal;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <h1>Korean to English Translator</h1>
    <textarea id="input" rows="4" cols="50" placeholder="Type or paste Korean text here..."></textarea><br>
    <button id="translateButton">Translate</button>
    <h2>Translation:</h2>
    <div id="translationOutput" class="output"></div>

    <script>
        // Function to decompose Hangul syllables into parts
        function hangulToParts(hangul) {
            const start = 44032; // U+AC00 (가)
            const end = 55215;   // U+D7A3 (힣)

            const hangulParts = [];

            for (let i = 0; i < hangul.length; i++) {
                const charCode = hangul.charCodeAt(i);
                if (charCode >= start && charCode <= end) {
                    const index = charCode - start;
                    const initial = Math.floor(index / 588); // 19 initials
                    const medial = Math.floor((index % 588) / 28); // 21 medials
                    const final = index % 28; // 28 finals

                    // Hangul Jamo Unicode ranges
                    const initialJamo = String.fromCharCode(0x1100 + initial);
                    const medialJamo = String.fromCharCode(0x1161 + medial);
                    const finalJamo = final ? String.fromCharCode(0x11A7 + final) : '';

                    // English pronunciation for initials, medials, and finals
                    const initialsPronunciations = ['g', 'kk', 'n', 'd', 'tt', 'r', 'm', 'b', 'pp', 's', 'ss', 'j', 't', 'p', 'h'];
                    const medialsPronunciations = ['a', 'ae', 'e', 'yeo', 'ye', 'o', 'wa', 'wae', 'yo', 'u', 'wi', 'eu', 'yi', 'i', 'eo'];
                    const finalsPronunciations = ['', 'g', 'n', 'd', 'l', 'm', 'b', 's', 'ng', 'j', 'h'];

                    hangulParts.push({
                        hangul: hangul[i],
                        initial: initialJamo,
                        medial: medialJamo,
                        final: finalJamo,
                        initialPronunciation: initialsPronunciations[initial] || '',
                        medialPronunciation: medialsPronunciations[medial] || '',
                        finalPronunciation: finalsPronunciations[final] || '',
                    });
                }
            }
            return hangulParts;
        }

        // Dictionary of Korean to English words
        const dictionary = {
            "헌법": "Constitution",
            "재판소": "Court",
            // Add more translations here as required
        };

        // Function to translate Korean strings to English
        function translateKoreanToEnglish(koreanString) {
            const translatedWords = [];
            let i = 0;

            while (i < koreanString.length) {
                let found = false;

                // Check for the longest matching substring
                for (let j = koreanString.length; j > i; j--) {
                    const substring = koreanString.substring(i, j);
                    if (substring in dictionary) {
                        translatedWords.push(substring);
                        i = j; // Move index to the end of matched substring
                        found = true;
                        break;
                    }
                }
                
                // If no match was found, move to the next character
                if (!found) {
                    i++;
                }
            }
            return translatedWords;
        }

        // Event listener for the translate button
        document.getElementById('translateButton').addEventListener('click', function() {
            const koreanInput = document.getElementById('input').value;
            const translatedTextArray = translateKoreanToEnglish(koreanInput);
            const outputArray = [];

            // Generate output for each translated word
            translatedTextArray.forEach(word => {
                const parts = hangulToParts(word);
                const hangulTransliteration = parts.map(part => 
                    `${part.hangul} ${part.initial} ${part.initialPronunciation} ${part.medial} ${part.medialPronunciation} ${part.final} ${part.finalPronunciation}`
                ).join(' ');
                outputArray.push(`<div class="word hangul-text">${hangulTransliteration} = ${dictionary[word]}</div>`);
            });

            // Display results
            document.getElementById('translationOutput').innerHTML = outputArray.join('');
        });
    </script>
</body>
</html>

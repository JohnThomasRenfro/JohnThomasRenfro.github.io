<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korean to English Translator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .output {
            margin-top: 20px;
        }
        .word {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>Korean to English Translator</h1>
    <textarea id="input" rows="4" cols="50" placeholder="Type or paste Korean text here..."></textarea><br>
    <button id="translateButton">Translate</button>
    <h2>Translation:</h2>
    <div id="translationOutput" class="output"></div>

    <script>
        // Function to decompose Hangul syllables into parts
        function hangulToParts(hangul) {
            const start = 44032; // U+AC00 (가)
            const end = 55215;   // U+D7A3 (힣)

            const hangulParts = [];

            for (let i = 0; i < hangul.length; i++) {
                const charCode = hangul.charCodeAt(i);
                if (charCode >= start && charCode <= end) {
                    const index = charCode - start;
                    const initial = Math.floor(index / 588); // 19 initials
                    const medial = Math.floor((index % 588) / 28); // 21 medials
                    const final = index % 28; // 28 finals

                    // Hangul Jamo Unicode ranges
                    const initialJamo = String.fromCharCode(0x1100 + initial);
                    const medialJamo = String.fromCharCode(0x1161 + medial);

                    // English pronunciation for initials and medials
                    const initials = { 0: '', 1: 'h', 2: 'j', 3: 'j', 4: '', 5: '', 6: '', 7: '', 8: 'h', 9: '', 10: 'k', 11: 'k', 13: 'g', 14: 'n', 15: 'n', 16: 'n', 17: 't', 18: 't' }; // Initials
                    const medials = { 0: '', 1: 'o', 2: 'a', 3: 'a', 4: 'o', 5: 'o', 6: '', 7: '', 8: 'u', 9: '', 10: 'u', 11: 'u', 12: 'e', 13: 'e', 14: 'e', 15: 'i', 16: 'i', 17: '', 18: 'i' }; // Medials

                    const initialPronunciation = initials[Math.floor(index / 28)];
                    const medialPronunciation = medials[Math.floor((index % 28) / 7)];

                    const finalJamo = final ? String.fromCharCode(0x11A7 + final) : '';
                    const finalPronunciation = final ? 'n' : ''; // Simplified final pronunciation for demonstration purposes

                    hangulParts.push({
                        hangul: hangul[i],
                        initial: initialJamo,
                        medial: medialJamo,
                        initialPronunciation,
                        medialPronunciation,
                        final: finalJamo,
                        finalPronunciation,
                    });
                }
            }
            return hangulParts;
        }

        // Dictionary of Korean to English words
        const dictionary = {
            "헌법": "Constitution",
            "안녕하세요": "Hello",
            "세계": "World",
            "사랑": "Love",
            "행복": "Happiness",
            "학교": "School",
            "사람": "Person",
            "친구": "Friend",
            "가족": "Family",
            "여행": "Travel",
            "음식": "Food",
            "책": "Book",
            "연습": "Practice",
            "언어": "Language",
            "기술": "Technology",
            "컴퓨터": "Computer",
            "사계절": "Four Seasons",
            // Add more translations as needed
        };

        // Function to translate Korean strings to English
        function translateKoreanToEnglish(koreanString) {
            const translatedWords = [];
            let i = 0;

            while (i < koreanString.length) {
                let found = false;

                // Check for the longest matching substring
                for (let j = koreanString.length; j > i; j--) {
                    const substring = koreanString.substring(i, j);
                    if (substring in dictionary) {
                        translatedWords.push(substring);
                        i = j; // Move index to the end of matched substring
                        found = true;
                        break;
                    }
                }
                
                // If no match was found, move to the next character
                if (!found) {
                    i++;
                }
            }

            return translatedWords;
        }

        // Event listener for the translate button
        document.getElementById('translateButton').addEventListener('click', function() {
            const koreanInput = document.getElementById('input').value;
            const translatedTextArray = translateKoreanToEnglish(koreanInput);
            const outputArray = [];

            // Generate output for each translated word
            translatedTextArray.forEach(word => {
                const parts = hangulToParts(word);
                const hangulTransliteration = parts.map(part => {
                    const initialTransliteration = (part.initial === 'ᄒ') ? 'h' : (part.initial === 'ᄇ') ? 'b' : part.initial;
                    const medialTransliteration = (part.medial === 'ᅥ') ? 'eo' : part.medial;
                    const finalTransliteration = (part.final === 'ᆫ') ? 'n' : (part.final === 'ᆸ') ? 'b' : part.final;
                    
                    return (part.initial + ' ' + part.initialPronunciation).replace(' ', '') + ' ' + (part.medial + ' ' + part.medialPronunciation).replace(' ', '') + ' ' + (part.final + ' ' + part.finalPronunciation).replace(' ', '');
                }).join(' ');
                outputArray.push(`${hangulTransliteration} = ${dictionary[word]}`);
            });

            // Display results
            document.getElementById('translationOutput').innerHTML = outputArray.map(item => `<div class="word">${item}</div>`).join('');
        });
    </script>
</body>
</html>
